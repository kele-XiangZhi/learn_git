分库分表

![image-20220514235321447](C:\Users\1\AppData\Roaming\Typora\typora-user-images\image-20220514235321447.png)

分库分表是对数据库的一个扩张，使得数据能够更多的的区支持数据库扩容以及查询。主要通过垂直拆分和水平拆分，也就是微服务化，还有数据库相关的的划分，包括根据数据库维度分库，和表级别的分表。

常见的技术体系中的就是shardingsphere。主要是体现在配置的属性文件中，体现从那个维度区分库分表，以及他的分配规则，比如轮询，按摩分配。



之后是业务的数据迁移，也就是系统更换之后的老数据和新数据的一个迁移搬运，达到老数据不丢失，新数据正常运行，业务转化数据ok。一般分为全服务停机，通告整体切换数据，并且把老数据通过接口或者是数据清晰导入到信息的系统，缺点就是影像系统比较大。其次是全量和增强，也即是新的业务切换，整理到新的数据库系统，然后是老的数据整体全量切过去。最后是一边日志记录一边的切换，全部清晰。



因为微服务的处理，到了系统中的业务处理复杂，也就是分布式事务。不同服务对应其实就是数据库库同一个业务保证的操作事务一致性。从发展开就是本地到二阶段提交，再到柔性事务。主要原理是整一个系统上整体的区管理rm，然后一致确定之后提交。在实现技术上，比较成熟的有阿里系列的Seata，hmily以及spring 中的shardingsphere.

整体这部分是通过为数据库的更细化的支持，达到数据库的提升性能，包括查询包括容量，以及对复杂事物的处理。